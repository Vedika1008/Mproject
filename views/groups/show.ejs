<% layout("layouts/boilerplate") -%>

<div class="container mt-4">
  <div class="row justify-content-between align-items-center">
    <div class="col-8">
      <h2><%= group.name %></h2>
    </div>
    <div class="col-4 text-end">
      <a href="/listings/groups/<%= group._id %>/add-member" class="btn btn-outline-dark">
        + Add Member
      </a>
    </div>
  </div>
   <hr>
<div class="mt-4">
  <h5>Group Members:</h5>
  <ul class="list-group col-md-6">
    <% for (let member of group.members) { %>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <%= member.username %>
        <% if (group.creator._id.equals(member._id)) { %>
          <span class="badge bg-dark text-white">Creator</span>
        <% } %>
      </li>
    <% } %>
  </ul>
</div>

  <hr>

  <div class="mt-4">
    <h5>Shared Listings:</h5>
    <% if (group.sharedListings.length === 0) { %>
      <p>No listings have been shared in this group yet.</p>
    <% } else { %>
      <% for (let entry of group.sharedListings) { %>
        <div class="card mb-3 shadow-sm border-0">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
  <h5 class="card-title text-danger fst-italic fw-semibold mb-0">
    <%= entry.listing.title %>
  </h5>
  <a href="/listings/<%= entry.listing._id %>" class="btn btn-sm btn-outline-dark">
    View Listing
  </a>
</div>
<p class="card-text">Shared by <strong><%= entry.sharedBy.username %></strong></p>

          </div>
        </div>
      <% } %>
    <% } %>
  </div>
</div>
